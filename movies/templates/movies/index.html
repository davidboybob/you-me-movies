{% extends 'movies/base.html' %}
{% load static %}

{% block content %}
<h1>Main Page</h1>
<img class="w-25" src="{% static 'movies/images/cat.jpg' %}" alt="smaple_img">
<hr>
<div class="row">

{% for movie in movies %}
<div class="card col-3 px-0 mr-1" style="width: 18rem; height: 35rem;">
  <a href="{% url 'movies:detail' movie.id %}"><img
      src="https://image.tmdb.org/t/p/w600_and_h900_bestv2{{ movie.poster_path }}" class="card-img-top"
      alt="poster_path"></a>
  <div class="card-body">
    {% comment %} {% if movie.overview %}
    {% if movie.overview|length > 30  %}
    <p class="card-text overflow-hidden">{{ movie.overview }}</p>
    {% elif movie.overview|length > 50 %}
    <p class="card-text overflow-hidden">{{ movie.overview }}</p>
    {% endif %}
    {% else %}
    <p>줄거리 내용이 없습니다.</p>
    {% endif %}
  </div>
  <div>
    {{ movie.title }} <br>
    {% for genres in movie.genre.all %}
    {{ genres }}
    {% endfor %}
    <br>
    {{ movie.audience}} <br>
    {{ movie.description }} {% endcomment %}
    <hr>
    <a href="{% url 'movies:like' movie.id %}">
      {% if user in movie.like_users.all %}
      <p>좋아요 누름</p>
      {% else %}
      <p>좋아요</p>
      {% endif %}
    </a>
    {{ movie.like_users.all|length }} 명이 이 영화를 좋아합니다.
  </div>
</div>
{% endfor %}

</div>
<hr>
{% endblock  %}

<style>
  .card-body {
    display: -webkit-box;
    webkit-line-clamp: 3;
    webkit-box-orient: vertical;
  }
</style>
